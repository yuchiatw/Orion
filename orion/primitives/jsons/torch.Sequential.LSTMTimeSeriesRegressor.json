{
    "name": "torch.Sequential.LSTMTimeSeriesRegressor", 
    "description": "LSTM autoencoder",
    "classifiers": {
        "type": "estimator",
        "subtype": "regressor"
    },
    "modalities": [],
    "primitive": "orion.primitives.torch.Sequential",
    "fit": {
        "method": "fit",
        "args": [
            {
                "name": "X",
                "type": "ndarray"
            },
            {
                "name": "y",
                "type": "array"
            }
        ]
    },
    "produce": {
        "method": "predict",
        "args": [
            {
                "name": "X",
                "type": "ndarray"
            }
        ],
        "output": [
            {
                "name": "y",
                "type": "array"
            }
        ]
    },
    "hyperparameters": {
        "fixed": {
            "classification": {
                "type": "bool",
                "default": false
            },
            "verbose": {
                "type": "bool",
                "default": true
            },
            "callbacks": {
                "type": "list",
                "default": [
                    {
                        "class": "keras.callbacks.EarlyStopping",
                        "args": {
                            "monitor": "val_loss",
                            "patience": 10,
                            "min_delta": 0.0003
                        }
                    }
                ]
            },
            "validation_split": {
                "type": "float",
                "default": 0.2
            },
            "batch_size": {
                "type": "int",
                "default": 64
            },
            "window_size": {
                "type": "int",
                "default": 250
            },
            "input_shape": {
                "type": "tuple",
                "default": [
                    250,
                    1
                ]
            },
            "input_size": {
                "type": "int",
                "default": 1
            },
            "dense_units": {
                "type": "int",
                "description": "Number of values ahead to predict",
                "default": 1
            },
            "optimizer": {
                "type": "str",
                "default": "torch.optim.Adam"
            },
            "loss": {
                "type": "str",
                "default": "torch.nn.functional.mse_loss"
            },
            "metrics": {
                "type": "list",
                "default": [
                    "mse"
                ]
            },
            "epochs": {
                "type": "int",
                "default": 35
            },
            "layers": {
                "type": "list",
                "default": [
                    {
                        "class": "torch.nn.LSTM",
                        "parameters": {
                            "input_size": "input_size",
                            "hidden_size": "lstm_1_hidden_size", 
                            "batch_first": true
                            
                        }
                    }, 
                    {
                        "class": "torch.nn.Dropout",
                        "parameters": {
                            "p": "dropout_1_rate"
                        }
                    },
                    {
                        "class": "torch.nn.LSTM",
                        "parameters": {
                            "input_size": "lstm_1_hidden_size", 
                            "hidden_size": "lstm_2_hidden_size", 
                            "batch_first": true
                            
                        }
                    },
                    {
                        "class": "torch.nn.Dropout",
                        "parameters": {
                            "p": "dropout_2_rate"
                        }
                    }, 
                    {
                        "class": "torch.nn.Linear",
                        "parameters": {
                            "in_features": "lstm_2_hidden_size", 
                            "out_features": "dense_units"
                        }

                    }
                ]
            }
        },
        "tunable": {
            "lstm_1_hidden_size": {
                "type": "int",
                "default": 80, 
                "range": [
                    1, 
                    500
                ] 
            },
            "dropout_1_rate": {
                "type": "float", 
                "default": 0.3, 
                "range": [
                    0.01, 
                    0.75
                ]
            },
            "lstm_2_hidden_size": {
                "type": "int",
                "default": 80, 
                "range": [
                    1, 
                    500
                ] 
            },
            "dropout_2_rate": {
                "type": "float", 
                "default": 0.3, 
                "range": [
                    0.01, 
                    0.75
                ]
            }
        }
    }
}
